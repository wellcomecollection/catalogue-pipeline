# test_documents folder

This folder contains a collection of randomly generated documents that look like
the documents in the API index.

They're meant for use in the API tests -- these JSON files get copied into the
API repo, then they can be loaded into an Elasticsearch index to ensure the API
can query them correctly.

These files are automatically generated by the ingestor tests.  Don't edit them
manually -- update the tests, then re-run them to generate new documents.

## Image documents

Test documents whose file name starts with 

- `images.examples.color-filter-tests`
- `images.similar-features` 

are **not** created automatically by the ingestor tests, because they contain vectors which can only be generated by the inferrer models.

Instead, for these we use "real" documents from the index (which means that, if they need to be updated, that should happen after a reindex is complete).

To update them, you can run `./update_image_documents.py <pipeline-date>`. If you want to change the record used for the test (eg if one of our examples is suppressed) then you can do so just by changing the `id` field in one of the documents and running the script.
